apiVersion: tf.upbound.io/v1beta1
kind: ProviderConfig
metadata:
  name: s3-for-frontend-civo-preprod-nyc1-provider-config
  annotations:
    argocd.argoproj.io/sync-wave: "-1"
spec:
  configuration: |
    terraform {
  backend &#34;s3&#34; {
    bucket   = &#34;k1-bu-mgmt-mgmt-barclays-corp&#34;
    key      = &#34;registry/clusters/s3/infrastructure/provider-config/terraform.tfstate&#34;
    region = &#34;us-west-2&#34;
    encrypt = true
  }
  required_providers {
    kubernetes = {
      source = &#34;hashicorp/kubernetes&#34;
      version = &#34;&gt;= 2.23.0, &lt; 3.0.0&#34;
    }
    vault = {
      source = &#34;hashicorp/vault&#34;
      version = &#34;&gt;= 3.19.0, &lt; 4.0.0&#34;
    }
    random = {
      source = &#34;hashicorp/random&#34;
      version = &#34;&gt;= 3.6.2, &lt; 4.0.0&#34;
    }
    aws = {
      source = &#34;hashicorp/aws&#34;
      version = &#34;&gt;= 5.30.0, &lt; 6.0.0&#34;
    }
  }
}
provider &#34;aws&#34; {
  region = &#34;us-west-2&#34;
  allowed_account_ids = [&#34;555935582951&#34;]
  assume_role_with_web_identity {
    session_name = &#34;kubefirst-pro&#34;
    role_arn = &#34;arn:aws:iam::555935582951:role/crossplane-mgmt-barclays-corp&#34;
    web_identity_token_file = &#34;/var/run/secrets/eks.amazonaws.com/serviceaccount/token&#34;
  }
}

  pluginCache: false
  credentials:
  - filename: .git-credentials
    source: Secret
    secretRef:
      namespace: crossplane-system
      name: git-credentials
      key: creds
---
apiVersion: tf.upbound.io/v1beta1
kind: Workspace
metadata:
  name: s3-for-frontend-civo-preprod-nyc1
spec:
  providerConfigRef: 
    name: s3-for-frontend-civo-preprod-nyc1-provider-config
  forProvider:
    source: Remote
    module: 
    enableTerraformCLILogging: true
    vars:
    
      - key: &lt;NAME&gt;
        value: "s3-for-frontend"
